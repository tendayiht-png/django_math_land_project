!function(){var RelayEvent;let RelayEvent1;let ALLOWED_DOMAINS=[".codecademy.com",".percipio.com",".skillsoft.com"];function parentPostMessage(data,source){(source||window.parent).postMessage({...data,source:"codecademy-relay"},"*")}(RelayEvent=RelayEvent1||(RelayEvent1={})).InternalRouteChange="route-change",RelayEvent.WebSCTRequest="webSCT:request",RelayEvent.WebSCTResponse="webSCT:response",RelayEvent.JupyterSaveRequest="jupyter:save",RelayEvent.JupyterSaveSuccess="jupyter:save-success",RelayEvent.JupyterSaveFailure="jupyter:save-failure",RelayEvent.LocationChanged="location-changed",RelayEvent.IFrameLoaded="iframe:loaded",RelayEvent.IFrameBlockClipboard="iframe:block-clipboard";let handleInternalRouteChange=_e=>{parentPostMessage({event:"route-change",location:document.location.href})},externalScripts=["https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js","https://static-assets.codecademy.com/le/assets/jquery.expect.js"],parent=document.currentScript&&document.currentScript.parentNode||document.body,loadScripts=function(scripts,index){if(index<scripts.length){let src=scripts[index];if(document.querySelector('[src="'+src+'"]'))loadScripts(scripts,index+1);else{let s=document.createElement("script");s.type="text/javascript",parent.appendChild(s),s.onload=function(){loadScripts(scripts,index+1)},s.src=src}}else parentPostMessage({event:"location-changed",location:window.location.href})};window.jQuery&&window.jQuery.fn.jquery.match(/^3\./)?loadScripts(externalScripts,1):loadScripts(externalScripts,0);let handleWebSCTRequest=function(e){let error;if(e.data.code){try{window.eval(e.data.code)}catch(err){error=err.message}parentPostMessage({codecademy:"rocks",event:"webSCT:response",error:error})}},handleNotebookSaveRequest=function(_e){try{window.jupyterapp?window.jupyterapp.commands.execute("docmanager:save").then(function(){parentPostMessage({event:"jupyter:save-success"})}):parentPostMessage({event:"jupyter:save-failure"})}catch(err){parentPostMessage({event:"jupyter:save-failure",error:null==err?void 0:err.message})}},handleClipboardBlockRequest=function(_e){["copy","paste","cut"].forEach(eventName=>{document.addEventListener(eventName,async function(e){if("paste"===e.type){e.preventDefault(),parentPostMessage({event:"iframe:block-clipboard"});return}try{if(!("clipboard"in navigator))return;let copiedText=await navigator.clipboard.readText();await navigator.clipboard.writeText("&cc;"+copiedText)}catch(_err){parentPostMessage({event:"iframe:block-clipboard"})}},!0)})};(()=>{let oldHref=document.location.href,bodyList=document.querySelector("body");bodyList&&new MutationObserver(()=>{oldHref!==document.location.href&&(oldHref=document.location.href,parentPostMessage({event:"route-change",location:document.location.href}))}).observe(bodyList,{childList:!0,subtree:!0})})(),window.addEventListener("message",function(e){var _e_data;let originHostname=new URL(e.origin).hostname;if(ALLOWED_DOMAINS.some(domain=>originHostname.endsWith(domain))&&(null==(_e_data=e.data)?void 0:_e_data.event))switch(e.data.event){case"webSCT:request":handleWebSCTRequest(e);break;case"jupyter:save":handleNotebookSaveRequest(e);break;case"route-change":handleInternalRouteChange(e);break;case"iframe:block-clipboard":handleClipboardBlockRequest(e)}}),window.addEventListener("load",function(){parentPostMessage({event:"iframe:loaded",codecademy:document.body.innerHTML})})}();
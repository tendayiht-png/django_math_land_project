window.CJSAPPS_ARR=["163","552","551","495","650","436","350","553","322","766"],window.CJSAPPS_PARENT={},window.CJSAPPS_PARENT[163]={},window.CJSAPPS_PARENT[552]={},window.CJSAPPS_PARENT[552].AfterDocReady=function(e,t,r,o,a){DIGIOH_CUSTOM_JS.log;try{e.sha256=function e(t){function r(e,t){return e>>>t|e<<32-t}for(var o,a,n=Math.pow,i=n(2,32),s="length",l="",c=[],g=8*t[s],u=e.h=e.h||[],d=e.k=e.k||[],p=d[s],f={},m=2;p<64;m++)if(!f[m]){for(o=0;o<313;o+=m)f[o]=m;u[p]=n(m,.5)*i|0,d[p++]=n(m,1/3)*i|0}for(t+="";t[s]%64-56;)t+="\0";for(o=0;o<t[s];o++){if((a=t.charCodeAt(o))>>8)return;c[o>>2]|=a<<(3-o)%4*8}for(c[c[s]]=g/i|0,c[c[s]]=g,a=0;a<c[s];){var _=c.slice(a,a+=16),I=u;for(u=u.slice(0,8),o=0;o<64;o++){var S=_[o-15],b=_[o-2],h=u[0],y=u[4],O=u[7]+(r(y,6)^r(y,11)^r(y,25))+(y&u[5]^~y&u[6])+d[o]+(_[o]=o<16?_[o]:_[o-16]+(r(S,7)^r(S,18)^S>>>3)+_[o-7]+(r(b,17)^r(b,19)^b>>>10)|0);(u=[O+((r(h,2)^r(h,13)^r(h,22))+(h&u[1]^h&u[2]^u[1]&u[2]))|0].concat(u))[4]=u[4]+O|0}for(o=0;o<8;o++)u[o]=u[o]+I[o]|0}for(o=0;o<8;o++)for(a=3;a+1;a--){var C=u[o]>>8*a&255;l+=(C<16?0:"")+C.toString(16)}return l},function(){function t(e,t){var r=e[0],s=e[1],l=e[2],c=e[3];r=o(r,s,l,c,t[0],7,-680876936),c=o(c,r,s,l,t[1],12,-389564586),l=o(l,c,r,s,t[2],17,606105819),s=o(s,l,c,r,t[3],22,-1044525330),r=o(r,s,l,c,t[4],7,-176418897),c=o(c,r,s,l,t[5],12,1200080426),l=o(l,c,r,s,t[6],17,-1473231341),s=o(s,l,c,r,t[7],22,-45705983),r=o(r,s,l,c,t[8],7,1770035416),c=o(c,r,s,l,t[9],12,-1958414417),l=o(l,c,r,s,t[10],17,-42063),s=o(s,l,c,r,t[11],22,-1990404162),r=o(r,s,l,c,t[12],7,1804603682),c=o(c,r,s,l,t[13],12,-40341101),l=o(l,c,r,s,t[14],17,-1502002290),r=a(r,s=o(s,l,c,r,t[15],22,1236535329),l,c,t[1],5,-165796510),c=a(c,r,s,l,t[6],9,-1069501632),l=a(l,c,r,s,t[11],14,643717713),s=a(s,l,c,r,t[0],20,-373897302),r=a(r,s,l,c,t[5],5,-701558691),c=a(c,r,s,l,t[10],9,38016083),l=a(l,c,r,s,t[15],14,-660478335),s=a(s,l,c,r,t[4],20,-405537848),r=a(r,s,l,c,t[9],5,568446438),c=a(c,r,s,l,t[14],9,-1019803690),l=a(l,c,r,s,t[3],14,-187363961),s=a(s,l,c,r,t[8],20,1163531501),r=a(r,s,l,c,t[13],5,-1444681467),c=a(c,r,s,l,t[2],9,-51403784),l=a(l,c,r,s,t[7],14,1735328473),r=n(r,s=a(s,l,c,r,t[12],20,-1926607734),l,c,t[5],4,-378558),c=n(c,r,s,l,t[8],11,-2022574463),l=n(l,c,r,s,t[11],16,1839030562),s=n(s,l,c,r,t[14],23,-35309556),r=n(r,s,l,c,t[1],4,-1530992060),c=n(c,r,s,l,t[4],11,1272893353),l=n(l,c,r,s,t[7],16,-155497632),s=n(s,l,c,r,t[10],23,-1094730640),r=n(r,s,l,c,t[13],4,681279174),c=n(c,r,s,l,t[0],11,-358537222),l=n(l,c,r,s,t[3],16,-722521979),s=n(s,l,c,r,t[6],23,76029189),r=n(r,s,l,c,t[9],4,-640364487),c=n(c,r,s,l,t[12],11,-421815835),l=n(l,c,r,s,t[15],16,530742520),r=i(r,s=n(s,l,c,r,t[2],23,-995338651),l,c,t[0],6,-198630844),c=i(c,r,s,l,t[7],10,1126891415),l=i(l,c,r,s,t[14],15,-1416354905),s=i(s,l,c,r,t[5],21,-57434055),r=i(r,s,l,c,t[12],6,1700485571),c=i(c,r,s,l,t[3],10,-1894986606),l=i(l,c,r,s,t[10],15,-1051523),s=i(s,l,c,r,t[1],21,-2054922799),r=i(r,s,l,c,t[8],6,1873313359),c=i(c,r,s,l,t[15],10,-30611744),l=i(l,c,r,s,t[6],15,-1560198380),s=i(s,l,c,r,t[13],21,1309151649),r=i(r,s,l,c,t[4],6,-145523070),c=i(c,r,s,l,t[11],10,-1120210379),l=i(l,c,r,s,t[2],15,718787259),s=i(s,l,c,r,t[9],21,-343485551),e[0]=u(r,e[0]),e[1]=u(s,e[1]),e[2]=u(l,e[2]),e[3]=u(c,e[3])}function r(e,t,r,o,a,n){return t=u(u(t,e),u(o,n)),u(t<<a|t>>>32-a,r)}function o(e,t,o,a,n,i,s){return r(t&o|~t&a,e,t,n,i,s)}function a(e,t,o,a,n,i,s){return r(t&a|o&~a,e,t,n,i,s)}function n(e,t,o,a,n,i,s){return r(t^o^a,e,t,n,i,s)}function i(e,t,o,a,n,i,s){return r(o^(t|~a),e,t,n,i,s)}function s(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var l="0123456789abcdef".split("");function c(e){for(var t="",r=0;r<4;r++)t+=l[e>>8*r+4&15]+l[e>>8*r&15];return t}function g(e){return function(e){for(var t=0;t<e.length;t++)e[t]=c(e[t]);return e.join("")}(function(e){txt="";var r,o=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=e.length;r+=64)t(a,s(e.substring(r-64,r)));e=e.substring(r-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<e.length;r++)n[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(n[r>>2]|=128<<(r%4<<3),r>55)for(t(a,n),r=0;r<16;r++)n[r]=0;return n[14]=8*o,t(a,n),a}(e))}function u(e,t){return e+t&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=g("hello"))function u(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}e.md5=g}(),e.md5lc=function(t){return e.md5(t).toLowerCase()},e.sha256lc=function(t){return e.sha256(t).toLowerCase()}}catch(e){return DIGIOH_CUSTOM_JS.logError(e,"custom_js_parent_apps"),e.message="DIGIOH: Custom JS Apps #552 (Parent: AfterDocReady) -- "+e.message,t.console.error(e),!0}},window.CJSAPPS_PARENT[551]={},window.CJSAPPS_PARENT[551].AfterDocReady=function(e,t,r,o,a){DIGIOH_CUSTOM_JS.log;try{function n(e,t){t||(t="=");const r=e.indexOf(t);if(-1===r)return[e];return[e.substring(0,r),e.substring(r+1)]}e.useCookies=function(){const t="utm_cookies";return e.getAccountMetadata(t)||e.getWidgetMetadata(t)},e.storeQueryString=function(){let r=t.parent.localStorage&&!e.useCookies()?function(e,r){t.parent.localStorage.getItem(e+"_first")||t.parent.localStorage.setItem(e+"_first",r),t.parent.localStorage.setItem(e+"_last",r),t.parent.sessionStorage.setItem(e+"_session",r)}:function(t,r){e.getCookie(t+"_first")||e.setCookie(t+"_first",r,{expirationDays:1e3}),e.setCookie(t+"_last",r,{expirationDays:1e3}),e.setCookie(t+"_session",r,{expirationDays:1/24/2})},o=e.getQueryString();if(o)for(var a of(o=o.substring(1),o=o.split("&"),o))2==(a=n(a)).length&&r(a[0],a[1])},e.getStoredQueryStringVal=function(r,o){if("first"!=o&&"last"!=o&&"session"!=o)throw new Error("api.getStoredQueryStringVal expects first, last, session param");r=r+"_"+o;let a="";return a=t.parent.localStorage&&!e.useCookies()?"session"==o?t.parent.sessionStorage.getItem(r):t.parent.localStorage.getItem(r):e.getCookie(r),decodeURIComponent(a)},e.getGAValue=function(){var e=r.cookie.match("(?:^|;)\\s*_ga=([^;]*)"),t=e?decodeURIComponent(e[1]):null;return t&&(e=t.match(/(\d+\.\d+)$/)),e?e[1]:""},e.getGAClientId=function(){return e.GoogleAnalytics&&e.GoogleAnalytics.tracker&&e.GoogleAnalytics.tracker.get?e.GoogleAnalytics.tracker.get("clientId"):e.getGAValue()},e.storeQueryString(),e.replaceMergeTagsInString=function(r){const o=function(e){return"null"==e||"undefined"==e?"":e||""},n="undefined"!=typeof boxapi;if("string"!=typeof r)throw new Error("UMT expects string, got "+typeof r+" with value "+r.toString());if(!r)return"";if(r.indexOf("[")<0)return r;const i=e.isPreview()?"[N/A in Preview]":"",s="";let l=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/\[COUNTRY\]/gi,o(e.getClientCountryName())||i)).replace(/\[COUNTRY_CODE\]/gi,o(e.getClientCountryCode())||i)).replace(/\[REGION\]/gi,o(e.getClientRegionOrStateName())||i)).replace(/\[REGION_CODE\]/gi,o(e.getClientRegionOrStateCode())||i)).replace(/\[CITY\]/gi,o(e.getClientCity())||i)).replace(/\[POSTAL_CODE\]/gi,o(e.getClientPostalCode())||i)).replace(/\[REFERRING_URL\]/gi,o(e.getReferrer())||i)).replace(/\[LANDING_URL\]/gi,o(e.getLandingPageUrl())||i)).replace(/\[BROWSER_TYPE\]/gi,o(e.getBrowserType())||i)).replace(/\[WEB_SOURCE\]/gi,o(e.getTrafficSource())||i)).replace(/\[SEARCH_ENGINE\]/gi,o(e.getSearchEngineSource())||i)).replace(/\[PAGE_VISITS\]/gi,o(e.getTotalPageViews())||i)).replace(/\[PAST_VISITS\]/gi,o(e.getTotalSessions())||i)).replace(/\[HOST_NAME\]/gi,o(e.getHostname())||i)).replace(/\[PAGE_PATH\]/gi,o(e.getPagePath())||i)).match(/\[PAGE_PATH\|(\d)\]/);if(l){let t=parseInt(l[1]),o=e.getPagePath().split("/");!isNaN(t)&&t<o.length&&(r=r.replace(l[0],o[t]))}r=(r=r.replace(/\[QUERY_STRING\]/gi,o(e.getQueryString())||i)).replace(/\[IP_ADDRESS\]/gi,o(e.getClientIpAddress())||i),n&&(r=r.replace(/\[(LIGHT)?BOX_NAME\]/gi,o(boxapi.getName())||i)),n&&(r=r.replace(/\[(LIGHT)?BOX_ID\]/gi,o(boxapi.getId())||i)),n&&(r=r.replace(/\[BOX_TYPE\]/gi,o(boxapi.getBoxType())||i)),n&&(r=r.replace(/\[BOX_PAGE(_?NAME)?\]/gi,o(boxapi.getPageNameOrTitle())||i)),r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/\[VARIATION_ID\]/gi,o(a.variation_short_id)||i)).replace(/\[VENDOR_ID\]/gi,o(e.getAccountId())||i)).replace(/\[VENDOR_GUID\]/gi,o(e.getAccountGuid())||i)).replace(/\[DEVICE\]/gi,o(e.getDeviceType())||i)).replace(/\[OPERATING_SYSTEM\]/gi,o(e.getOperatingSystem())||i)).replace(/\[BROWSER_TYPE\]/gi,o(e.getBrowserType())||i)).replace(/\[BROWSER_VERSION\]/gi,o(e.getBrowserVersion())||i)).replace(/\[SUBMIT_URL\]/gi,o(e.getCurrentUrl())||i)).replace(/\[SUBMIT_DATE\]/gi,o((new Date).toUTCString())||i)).replace(/\[EMAIL\]/gi,o(e.getDataLayerValue("email"))||s)).replace(/\[PHONE\]/gi,o(e.getDataLayerValue("phone"))||s)).replace(/\[NAME\]/gi,o(e.getDataLayerValue("name"))||s)).replace(/\[FIRST_NAME\]/gi,o(e.getDataLayerValue("first_name"))||s)).replace(/\[LAST_NAME\]/gi,o(e.getDataLayerValue("last_name"))||s)).replace(/\[OPT_IN\]/gi,o(e.getDataLayerValue("opt_in"))||s)).replace(/\[URIENC\|FIRST_NAME\]/gi,o(encodeURIComponent(e.getDataLayerValue("first_name")))||s)).replace(/\[URIENC\|LAST_NAME\]/gi,o(encodeURIComponent(e.getDataLayerValue("last_name")))||s)).replace(/\[URIENC\|EMAIL\]/gi,o(encodeURIComponent(e.getDataLayerValue("email")))||s);const c=t.parent.mParticle&&t.parent.mParticle.Identity&&t.parent.mParticle.Identity.getCurrentUser()?t.parent.mParticle.Identity.getCurrentUser().getMPID():null;if(r=r.replace(/\[MPID\]/gi,c||i),/\[DL\|/.test(r)){const e=r.match(/\[DL\|(\w+)\|(\w+)\]/);if(e&&3==e.length){const o=e[0],a=e[1],n=e[2];let i="";if(t.parent.dataLayer&&a&&n)for(const e of t.parent.dataLayer)if(e.event==a){i=e[n]||"";break}r=r.replace(o,i)}}const g=/\[RX\|/i,u=/\[RX\|([A-Z][A-Z0-9_]+)\|\/((?:\\\/|[^\/])*)\/([gmixsuUAJD]*)\]/i,d=/^(?:[^\\(]|\\.)*\((?:[^\\)]|\\.)*\)(?:[^\\(]|\\.)*$/;for(;g.test(r);)try{const t=r.match(u);if(!t)throw new Error("expected format [RX|SIMPLE_MERGE_TAG_NAME|/rx body/rxflags]");const o=t[0],a="["+t[1]+"]",n=e.replaceMergeTagsInString(a);if(n==a)throw new Error("Invalid simple merge tag "+t[1]+" in "+o);const i=t[2],s=t[3]||"",l=new RegExp(i,s);if(!d.test(i))throw new Error("regexp must contain exactly (one capturing group)");if(/g/.test(s))throw new Error("global match flag 'g' is not supported");const c=n.match(l);let g="";c&&c[1]?g=c[1]:e.warnNotifyApp("[RX] merge tag /"+i+"/"+s+"did not match '"+n+" ("+a+")"),r=r.replace(o,g)}catch(t){e.errorNotifyApp("Invalid RX merge tag in: '"+r+"': "+t.message),r=""}if("function"==typeof e.getGAClientId&&(r=r.replace(/\[GA_CLIENT_ID\]/gi,o(e.getGAClientId())||s)),"function"==typeof r.matchAll){const a=r.matchAll(/\[TEXT_?(\d\d?)\]/gi);if(n)for(const e of a){const t=e[1],a="main"==boxapi.getPageName()?"text"+t:boxapi.getPageName()+"text"+t,n=settings[a]||{};r=r.replace(e[0],o(n.text)||s)}const i=r.matchAll(/\[BUTTON_?(\d\d?)\]/gi);if(n)for(const e of i){const t=e[1],a="main"==boxapi.getPageName()?"button"+t:boxapi.getPageName()+"button"+t,n=settings[a]||{};r=r.replace(e[0],o(n.text)||s)}if([...r.matchAll(/\[URIENC\|CUSTOM_?(\d\d?)\]/gi)].length){let t=(r=r.replace(/\URIENC\|/gi,"")).matchAll(/\[CUSTOM_?(\d\d?)\]/gi);for(let a of t)r=r.replace(a[0],o(encodeURIComponent(e.getDataLayerValue("custom_"+a[1])))||s)}let l=r.matchAll(/\[CUSTOM_?(\d\d?)\]/gi);for(let t of l)r=r.replace(t[0],o(e.getDataLayerValue("custom_"+t[1]))||s);if([...r.matchAll(/\[URIENC\|EP?(\d\d?)_CUSTOM_?(\d\d?)\]/gi)].length){let t=(r=r.replace(/\URIENC\|/gi,"")).matchAll(/\[EP?(\d\d?)\_CUSTOM_?(\d\d?)\]/gi);for(let a of t)r=r.replace(a[0],o(encodeURIComponent(e.getDataLayerValue("ep"+a[1]+"_custom_"+a[2])))||s)}let c=r.matchAll(/\[EP?(\d\d?)\_CUSTOM_?(\d\d?)\]/gi);for(let t of c)r=r.replace(t[0],o(e.getDataLayerValue("ep"+t[1]+"_custom_"+t[2]))||s);let g=r.matchAll(/\[COOKIE\|([^\|\]]+)(\|(\S+))?\]/g);for(let t of g){let a=t[3]||"";r=r.replace(t[0],o(e.getCookie(t[1]))||a)}let u=r.matchAll(/\[LS\|([^\|\]]+)(\|(\S+))?\]/g);for(let e of u){let a=e[3]||"";r=t.parent.localStorage?r.replace(e[0],o(t.parent.localStorage.getItem(e[1]))||a):a}let d=r.matchAll(/\[QS\|([^\|\]]+)(\|(\S+))?\]/g);for(let t of d){let a=t[3]||"";r=r.replace(t[0],o(e.getStoredQueryStringVal(t[1],"last"))||a)}d=r.matchAll(/\[QS(FC|LC|SN)\|([^\|\]]+)(\|(\S+))?\]/g);for(let t of d){let a=t[4]||"",n="";switch(t[1]){case"FC":n="first";break;case"LC":default:n="last";break;case"SN":n="session"}r=r.replace(t[0],o(e.getStoredQueryStringVal(t[2],n))||a)}if(n){const t=r.matchAll(/\[i18n\|([a-zA-z0-9_]+)\]/gi);for(const o of t){const t=o[1];if(!0===boxapi.i18nReady){const a=boxapi.geti18nMatrix(boxapi.getId());if(!a||!a.length){e.warnNotifyApp("Found i18n merge tags but i18n app not yet initialized");break}const n=boxapi.geti18nMatrix(boxapi.getId()),i=boxapi.getElemIndex(n,t),s=boxapi.getLangIndex(n,e.language||"en");translation=n[i][s],r=r.replace(o[0],translation)}}}if(e.getStoredSegTraits){let t=r.matchAll(/\[SEG_TRAIT\|([^\|\]]+)(\|(\S+))?\]/g);for(let a of t){let t=a[4]||"",n=a[1],i=o(e.getStoredSegTraits()[n])||t;r=r.replace(a[0],i)}}if("function"==typeof e.getMergeTagName){const o=e.getMergeTagName(),a=new RegExp("\\["+o+"\\|([a-zA-Z_\\- ]+)(?:\\|(.+?))?\\]","g"),n=r.matchAll(a);for(const o of n){const a=o[0],n=o[1],i=o[2],s=e.getTargetableObjectName();if(t.parent[s]||e[s]){const o=t.parent[s][n];o?(r=r.replace(a,o),e.infoNotifyApp("Universal Merge Tags: replaced from "+e.getTrackingAppName()+" "+n+"="+o)):i?(r=r.replace(a,i),e.infoNotifyApp("Universal Merge Tags: replaced from "+e.getTrackingAppName()+" "+n+"="+i+" (default)")):(e.warnNotifyApp("Universal Merge Tags: no value for "+e.getTrackingAppName()+" field "+n+" with no default"),r="")}else e.warnNotifyApp("Universal Merge Tags: used "+r+" but TPAU App is not initialized "+s+" object not found)")}}else{const t=r.matchAll(/\[ITERABLE_FIELD\|([a-zA-Z_\- ]+)(?:\|(.+?))?\]/g);for(const o of t){const t=o[0],a=o[1],n=o[2];if(e.itrbl){const o=e.itrbl[a];o?(r=r.replace(t,o),e.infoNotifyApp("Universal Merge Tags: replaced from Iterable "+a+"="+o)):n?(r=r.replace(t,n),e.infoNotifyApp("Universal Merge Tags: replaced from Iterable "+a+"="+n+" (default)")):(e.warnNotifyApp("Universal Merge Tags: no value for Iterable field "+a+" with no default"),r="")}else e.warnNotifyApp("Universal Merge Tags: used "+r+" but Iterable App is not active ([https://help.digioh.com/knowledgebase/targeting-box-display-to-iterable-user-attributes-or-lists/|help doc])")}}}if(/\[UTC\]/gi.test(r)){const e=new Date;r=r.replace(/\[UTC\]/gi,e.getTime().toString())}if(/\[UTCDAY\]/.test(r)){const e=(new Date).setUTCHours(0,0,0,0);r=r.replace(/\[UTCDAY\]/gi,e)}if(n){const t=boxapi.getWidgetMetadata()||[];for(const o of t)if(RX_CUSTOM_MERGE_TAG_MD.test(o.k)){const t=o.k.match(RX_CUSTOM_MERGE_TAG_MD)[1],a=o.v,n=e.getDataLayerValue(a,boxapi.getId())||e.getDataLayerValue(a);r=r.replace("["+t+"]",n)}}return r}}catch(i){return DIGIOH_CUSTOM_JS.logError(i,"custom_js_parent_apps"),i.message="DIGIOH: Custom JS Apps #551 (Parent: AfterDocReady) -- "+i.message,t.console.error(i),!0}},window.CJSAPPS_PARENT[495]={},window.CJSAPPS_PARENT[495].AfterDocReady=function(e,t,r,o,a){DIGIOH_CUSTOM_JS.log;try{var n=t.location.href;const r="Single-Page-App Support";e.spaNotifier||(e.spaNotifier=e.initAppNotifications(r)),e.isSPA=!0,setInterval((function(){!function(r){try{const o=e.getQueryString();if(/email|userId/i.test(o)||/email|userId/i.test(n))return;(t.location.href!=n||r)&&(n=t.location.href,e.LIGHTBOX.closeAllInlineForms(),e.LIGHTBOX.closeAllOpenLightboxes(),e.LIGHTBOX.onPageUrlChanged(n,!0,!0,!1,!1),e.spaNotifier.infoNotifyApp("Lightbox Page URL Changed - SUCCESS - "+n))}catch(t){e.spaNotifier.errorNotifyApp("Lightbox Page URL Changed - ERROR ==> "+n),e.spaNotifier.errorNotifyApp(t.message)}}(!1)}),500)}catch(e){return DIGIOH_CUSTOM_JS.logError(e,"custom_js_parent_apps"),e.message="DIGIOH: Custom JS Apps #495 (Parent: AfterDocReady) -- "+e.message,t.console.error(e),!0}},window.CJSAPPS_PARENT[650]={},window.CJSAPPS_PARENT[436]={},window.CJSAPPS_PARENT[350]={},window.CJSAPPS_PARENT[553]={},window.CJSAPPS_PARENT[553].AfterDocReady=function(e,t,r,o,a){var n={};n.log=DIGIOH_CUSTOM_JS.log;try{const P="iterable_proxy_integration_id",D="iterable_pageview_event",w="iterable_track_pageview_json",U="itrbl";let v="EU"===e.CONFIG.REGION?"https://eu-jsapi.lightboxcdn.com":"https://jsapi.lightboxcdn.com";/DEV_PROXY/.test(e.getQueryString())&&(v="https://localhost:44323",e.warnNotifyApp("Using dev proxy "+v));const N=v+"/it9nrcf8em5qe7t85c9/v1/iterable/GetUserByEmail",G=v+"/it9nrcf8em5qe7t85c9/v1/iterable/GetUserById",J=v+"/it9nrcf8em5qe7t85c9/v1/iterable/EventTrack",x=v+"/it9nrcf8em5qe7t85c9/v1/iterable/AddOrUpdateUser",R=10,M=e.getHostname(),L=e.getAccountGuid(),H=e.getAccountMetadata(D),k=e.getAccountMetadata(w);let B=e.getAccountMetadata(P+":"+M);if(e.isIterableProxyEnabled=function(){return!!B},B)i("Using Site-specific Iterable Integration ID "+B+" for "+M);else{if(B=e.getAccountMetadata(P),!B)return void s("Iterable App requires account metadata <strong>"+P+"</strong> : [https://help.digioh.com/knowledgebase/targeting-box-display-to-iterable-user-attributes-or-lists/|helpdoc]");i("Using Account-level Iterable Integration ID "+B)}if(e.validateEventPayloadJson=function(e,t){try{const r=JSON.parse(e);for(const e of Object.keys(r))/\./.test(e)&&l(t+":{ ... "+e+": ... } has a period which will cause problems with Iterable handlebar syntax [https://support.iterable.com/hc/en-us/articles/206430615-Events-and-Event-Properties-#event-properties|(help doc)]")}catch(e){return s("Invalid JSON for "+t),!1}return!0},k){if(!H)return void s("Must also configure "+D+" when using "+w);if(!e.validateEventPayloadJson(k,w+" (account metadata)"))return}H&&i("Tracking page views to Iterable with "+(k?"custom":"default")+" event payload");const j="d",V="jsonp";function i(t,r){t="Iterable App: "+t,r?r(t):e.infoNotifyApp(t),n.log(t)}function s(t){i(t,e.errorNotifyApp)}function l(t){i(t,e.warnNotifyApp)}function c(e){let t="<ul>";for(const r of Object.keys(e))"emailListIds"!=r&&"itblInternal"!=r&&"unsubscribedChannelIds"!=r&&"subscribedMessageTypeIds"!=r&&"unsubscribedMessageTypeIds"!=r&&"eventQueue"!=r&&(t+="<li><strong>"+r+"</strong>:"+e[r]+"</li>");const r=e.emailListIds||[];for(const e of r)t+="<li>lists.<strong>"+e+"</strong>:true</li>";return t+="</ul>",t}function g(t){if(!B)throw new Error("Must configure account metadata "+P+" to use this app");if(e.failTrack=e.failTrack||{},e.failTrack[t]>1)return s("Aborting proxy call due to failures"),void(e.iterableAsyncStatus="fail");e.iterableAsyncStatus="pending",o.ajax({dataType:"jsonp",url:t,success:function(r){if(r&&"object"==typeof r&&r.hasOwnProperty("success")&&r.success&&r.hasOwnProperty("payload")&&r.payload.hasOwnProperty("user")&&(r.payload.user.hasOwnProperty("email")||r.payload.user.hasOwnProperty("userId"))&&r.payload.user.hasOwnProperty("dataFields")){p(r.payload.user.dataFields),T(),y(),e.reload(),e.processOpenBoxes(),e.iterableAsyncStatus="done"}else"object"==typeof r&&r.error&&r.error.includes("encse")?s("Iterable App does not support SHA256 encryption, enabled for integration ID "+B+": disable or use a different integration"):(s("Did <strong>not</strong> find Iterable User"),e.failTrack[t]=e.failTrack[t]||0,e.failTrack[t]++,e.iterableAsyncStatus="fail",y())},error:function(t,r,o){s("Iterable API error: "+r),e.iterableAsyncStatus="fail"},complete:function(){e.LIGHTBOX.customJsOnDocumentReadyCallback()}})}function u(e){g(G+"?user_guid="+L+"&integration_id="+B+"&platform="+j+"&format="+V+"&userid="+encodeURIComponent(e))}function d(e){g(N+"?user_guid="+L+"&integration_id="+B+"&platform="+j+"&format="+V+"&email="+encodeURIComponent(e))}function p(e){e.email&&t.localStorage.setItem("_em",e.email),e.userId&&t.localStorage.setItem("_uid",e.userId),t.sessionStorage.setItem("_itrbl",JSON.stringify(e)),i("Stored Iterable profile in sessionStorage")}function f(){const e=t.sessionStorage.getItem("_itrbl");return e?JSON.parse(e):null}function m(){let e=t.localStorage.getItem("_em");if(!e){e=(f()||{}).email}return e||""}function _(e){if(e&&e.trim()){if(I()){i("Replacing identity "+(m()||b()||"unknown")+" with "+e),h(!0)}else i("Identifying as "+e),h(!1);t.localStorage.setItem("_em",e),d(e)}else s("Enter an email or userId")}function I(){return!!m()||!!b()}function S(e){if(I()){i("Replacing identity "+(m()||b()||"unknown")+" with "+e),h(!0)}else i("Identifying as userId "+e),h(!1);t.localStorage.setItem("_uid",e),u(e)}function b(){return t.localStorage.getItem("_uid")}function h(r){t.sessionStorage.removeItem("_itrbl"),t.localStorage.removeItem("_em"),t.localStorage.removeItem("_uid"),r&&t.localStorage.removeItem("_eq"),e[U]={known:"false",unknown:"true"},i("Cleared Iterable user profile")}function y(){const r=e[U],o=f();if(o){r.known="true",r.unknown="false",r.lists={},r.segments={};let e=0,n=0;for(const t of Object.keys(o))if("account"==t){var a=o[t];for(const t in a)r[t]=a[t].toString(),e++}else r[t]=o[t].toString(),e++;let s=(o.emailListIds||[]).concat(o.userListIds||[]);for(const e of s)r.lists[e]||(r.lists[e]="true",n++);t.top.tpau=r,i("Added "+e+" targetable attributes to DIGIOH_API."+U+" and "+n+" list ids to DIGIOH_API."+U+".lists")}else r.known="false",r.unknown="true"}function O(t,r,a=null){if(!B)throw new Error("Must configure account metadata "+P+" to use this app");const n={};if(e.getIterableEmail())n.email=e.getIterableEmail();else{if(!e.getIterableUserId())return void C(t,r);n.userId=e.getIterableUserId()}n.eventName=t,n.createNewFields=!0,n.dataFields=r,a&&(a.updateEventId&&(n.id=a.updateEventId),a.createdAt&&(n.createdAt=a.createdAt));let l=J+"?user_guid="+L+"&integration_id="+B+"&platform="+j+"&format="+V+"&event_json_lz_encoded="+e.LIGHTBOX.LZString.compressToBase64(JSON.stringify(n));o.ajax({dataType:"jsonp",url:l,success:function(e){i("Tracked"+(a&&a.notificationContext?" "+a.notificationContext:"")+" event <strong>"+t+"</strong>"+c(r))},error:function(e,t,r){s("Iterable API error: "+t)}})}function C(e,t){const r={eventName:e,payloadObj:t,createdAt:Math.floor((new Date).getTime()/1e3)},o=E()||[];o.push(r),A(o)}function A(e){"object"==typeof e&&(e=JSON.stringify(e)),t.localStorage.setItem("_eq",e)}function E(){const e=t.localStorage.getItem("_eq")||"[]";return JSON.parse(e)}function T(){const e=E();if(e.length){i("Tracking queued events to Iterable...");for(let t=0;t<e.length&&t<=R;t++){const t=e.pop();O(t.eventName,t.payloadObj,{createdAt:t.createdAt,notificationContext:"queued"})}A(e)}}e.itaNotify=i,e.itaNotifyError=s,e.itaNotifyWarn=l,e.formatIterableUserDataHtml=c,e.openBoxes=[],e.registerOpenBox=function(t){e.openBoxes.push(t)},e.processOpenBoxes=function(){for(const t of e.openBoxes)"function"==typeof t.populateMergeTags&&t.populateMergeTags()},e.getIterableUserByUserId=u,e.getIterableUserByEmail=d,e.createOrUpdateIterableEmail=function(t,r){if("object"!=typeof(r=r||{}))throw new Error("createOrUpdateIterableEmail optionalUserAttributes parameter must be object");const a=x+"?user_guid="+L+"&integration_id="+B+"&platform="+j+"&format="+V+"&admin_debug=1&user_json_lz_encoded="+LZString.compressToBase64('{"email":"'+t+'", "dataFields":'+JSON.stringify(r)+"}");if(!B)throw new Error("Must configure account metadata "+P+" to call createOrUpdateIterableEmail");o.ajax({dataType:"jsonp",url:a,success:function(r){r&&"object"==typeof r&&r.success?(/DEBUG/.test(e.getQueryString())&&e.debugger(),setTimeout((function(){d(t)}),3e3)):"object"==typeof r&&r.error&&r.error.includes("encse")?s("Iterable App does not support SHA256 encryption, enabled for integration ID "+B+": disable or use a different integration"):(/DEBUG/.test(e.getQueryString())&&e.debugger(),s("Failed to create/update Iterable user "+t))},error:function(e,t,r){s("Iterable API error: "+t)},complete:function(){}})},e.storeIterableProfile=p,e.getIterableProfile=f,e.getIterableEmail=m,e.setIterableEmail=_,e.setIterableUserId=S,e.getIterableUserId=b,e.clearIterableData=h,e.generateTargetableAttributes=y,e.trackIterableEvent=O,e.trackIterableEventDirect=function(t,r,a={}){if(!B)throw new Error("Must configure account metadata "+P+" to use this app");if(!t)throw new Error("api.trackIterableEventDirect requires emailOrUserId argument");if(!r)throw new Error("api.trackIterableEventDirect requires eventName argument");const n={};/@/.test(t)?n.email=t:n.userId=t,n.eventName=r,n.createNewFields=!0,n.dataFields=a;let l=J+"?user_guid="+L+"&integration_id="+B+"&platform="+j+"&format="+V+"&event_json_lz_encoded="+e.LIGHTBOX.LZString.compressToBase64(JSON.stringify(n));o.ajax({dataType:"jsonp",url:l,success:function(e){i("Direct event track for "+t+": event <strong>"+r+"</strong>"+c(a))},error:function(e,t,r){s("Iterable API error: "+t)}})},e.queueIterableEvent=C,e.getIterableEventQueue=E,e.processIterableQueuedEvents=T,e[U]={},e[U].lists=void 0,e[U].known=void 0,e[U].unknown=void 0,t.top.tpau=e[U];const X=/\s*[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\s*/;if(e.isIterableProxyEnabled()){const Q=/[<>]/,F=function(){let t=e.getUrlParameter("email");return X.test(t)?t:(t=atob(t),X.test(t)?t:"")}();F&&!Q.test(F)&&(h(!1),_(F),e.hideUrlParameter("email"),e.iterableAsyncStatus=null);const z=e.getUrlParameter("userId");if(z&&!Q.test(z)&&(h(!1),S(z),e.hideUrlParameter("userId"),e.iterableAsyncStatus=null),function(){if(!e.isQaMode())return;const t=r.createElement("div");t.id="digiohDialog",t.innerHTML='\n        <div id="digiohIterableController" style="position: fixed; top: 10px; left: 10px; z-index: 9999; padding: 20px; text-align: center; background-color: #f9f9f9; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); border-radius: 8px; font-family: Arial">\n            <button id="digiohCloseButton" style="position: absolute; top: 8px; right: 8px; padding: 5px; font-weight: bold; border: none; border-radius: 50%; background-color: #ccc; color: black; cursor: pointer;">X</button>\n            \n            <h1 style="font-size: 24px; font-weight: bold; margin-bottom: 20px;">Digioh-Iterable Control Panel</h1>\n        \n            <div style="margin-bottom: 10px;">\n                <div id="digiohEmail" style="margin-bottom: 10px;"><span style="font-weight: bold;">Email:</span> [Email]</div>\n                <div id="digiohUserId" style="margin-bottom: 10px;"><span style="font-weight: bold;">UserID:</span> [UserID]</div>\n            </div>\n        \n            <button id="digiohForgetUser" class="button2" style="margin-bottom: 20px; padding: 8px 20px; font-weight: bold; border: none; border-radius: 4px; background-color: #f44336; color: white; cursor: pointer;">Forget User</button>\n            <button id="digiohShowUserData" class="button4" style="padding: 8px 20px; font-weight: bold; border: none; border-radius: 4px; background-color: #3f51b5; color: white; cursor: pointer;">Show User Data</button>\n        \n            <div style="margin-bottom: 20px;">\n                    <div class="form_inputs_wrapper form_spacing" style="margin-bottom: 10px;">\n                        <input id="digiohEmailOrUserid" class="form_inputs" placeholder="Identify by email or userId" style="width: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">\n                        <button id="digiohIdentifyUser" class="button" style="margin-bottom: 10px; padding: 8px 20px; font-weight: bold; border: none; border-radius: 4px; background-color: #4CAF50; color: white; cursor: pointer;" aria-label="Submit Modal Form">Identify User</button>\n                    </div>\n            </div>\n        </div>\n        ',r.body.appendChild(t),r.getElementById("digiohForgetUser").addEventListener("click",(function(){e.clearIterableData(!0)})),r.getElementById("digiohIdentifyUser").addEventListener("click",(function(){const t=o("#digiohEmailOrUserid").val().trim();t?/@/.test(t)?X.test(t)?e.setIterableEmail(t):s("Enter a valid email address"):t.length>40?s("Enter a valid userId (max 40 chars)"):e.setIterableUserId(t):s("Enter an email address or Iterable userId")})),r.getElementById("digiohShowUserData").addEventListener("click",(function(){f()?i(c(f())):l("User is unknown");const e=E();let t="<strong>Event Queue</strong><ul>";if(e.length){for(let r=e.length-1;r>=0;r--){const o=e[r];t+="<li><strong>"+o.eventName+"</strong>: "+JSON.stringify(o.payloadObj)+"</li>"}t+="</ul>",i(t)}else i("No queued events")})),r.getElementById("digiohCloseButton").addEventListener("click",(function(){r.getElementById("digiohDialog").style.display="none"})),setInterval((function(){let t=e.getIterableEmail(),r=e.getIterableUserId();t&&t.trim()||(t="(unknown)"),r&&r.trim()||(r="(unknown)"),o("#digiohEmail").html("<strong>email:</strong> "+t),o("#digiohUserId").html("<strong>userId:</strong> "+r)}),500)}(),"fail"==e.iterableAsyncStatus)return;if(e.iterableAsyncStatus||i("Activated: <a href=https://help.digioh.com/knowledgebase/targeting-box-display-to-iterable-user-attributes-or-lists/>documentation</a>"),function(){if("object"==typeof t.digiohEventQueue&&t.digiohEventQueue.length)for(const r of t.digiohEventQueue)r.hasOwnProperty("eventName")&&r.hasOwnProperty("eventPayload")?(O(r.eventName,r.eventPayload),t.digiohEventQueue=[]):e.errorNotifyApp("Invalid window.digiohEventQueue, expect [{eventName:string,eventPayload:{...}], found "+JSON.stringify(t.digiohEventQueue))}(),function(){const t=!!H,r=f()?O:C,o={notificationContext:"pageview"};if(t)if(k)if(/\[\S+\]/.test(k))if("function"!=typeof e.replaceMergeTagsInString)e.errorNotifyApp("Box has [MERGE_TAGS], but UMT app not installed ([https://help.digioh.com/knowledgebase/digioh-universal-merge-tags/|help doc])");else{const t=e.replaceMergeTagsInString(k),a=JSON.parse(t);r(H,a,o)}else{const e=JSON.parse(k);r(H,e,o)}else{const t={page_path:e.getPagePath()};r(H,t,o)}}(),f())i("Got Iterable User Profile"),y(),T();else{const Y=m(),q=b();if(q)return u(q),"async_callback";if(Y)return d(Y),"async_callback";i("No saved Iterable profile, email, or userId available"),e[U].known=!1,e[U].unknown=!0}if(e.isSPA){i("Starting Iterable SPA monitor...");const Z=setInterval((function(){n.log("Iterable App: Monitor heartbeat "+m()+":"+b()+":profile="+!!f()),f()?clearInterval(Z):b()?(i("SPA monitor found userId "+b()+" calling iterable"),u(b())):m()&&(i("SPA monitor found email "+m()+" calling iterable"),d(m()))}),1e4)}}else i("Iterable targeting app installed but not enabled (need account metadata iterable_proxy_integration_id)")}catch(W){return DIGIOH_CUSTOM_JS.logError(W,"custom_js_parent_apps"),W.message="DIGIOH: Custom JS Apps #553 (Parent: AfterDocReady) -- "+W.message,t.console.error(W),!0}},window.CJSAPPS_PARENT[322]={},window.CJSAPPS_PARENT[766]={},async function(){window.DIGIOH_LOADER=window.DIGIOH_LOADER||{},window.DIGIOH_LOADER.loads=window.DIGIOH_LOADER.loads||{};let e=DIGIOH_LOADER?.loads?DIGIOH_LOADER.loads.user:null;e&&await e.promise,window.DIGIOH_CUSTOM_JS={runCustomJsOnDocumentReady:function(e,t,r,o,a){try{var n={};if(n.log=DIGIOH_CUSTOM_JS.log,parent.dataLayer){const O=parent.dataLayer.find((e=>e.hasOwnProperty("codecademy_email")&&null!==e.codecademy_email&&""!==e.codecademy_email));O&&!0===e.itrbl.unknown&&e.setIterableEmail(O.codecademy_email)}e.getDays=function(e){const t=new Date(e);if(isNaN(t.getTime()))return null;{const e=(new Date).getTime()-t.getTime();return Math.floor(e/864e5)}};var s=setInterval((function(){o('[data-testid="survey-target-skip"]').length&&(t.surveyTargetSkip=!0,e.reload(),clearInterval(s))}),1e3);if(e.ccGrabCount=e.ccGrabCount||0,!t.__CC_TRACKING_META__&&e.ccGrabCount<3)return e.ccGrabCount++,"async_retry";if(DIGIOH_API.experiments={},t.__CC_TRACKING_META__&&t.__CC_TRACKING_META__.experiments)for(const C of Object.keys(t.__CC_TRACKING_META__.experiments))DIGIOH_API.experiments[C.toString()]=t.__CC_TRACKING_META__.experiments[C].toString();const p="seg_prop",f="seg_track",m="seg_traits",_="custom_50",I="seg_persona_integration_id",S="seg_persona_space_id",b="seg_traits",h="seg_persona_hostlist";function l(e){t[b]=e}e.getStoredSegTraits=function(){return t[b]||{}};const y=/^([a-z0-9]*)layout$/;if(e.extractPageName=function(e){let t=e.match(y);if(t)return t[1]||"main"},e.addSegProperty=function(t,r,o,a){let n=t.getFieldMetadata(r,o,p);if(!n)return;let i=e.getDataLayer()[t.getId()];if(!i)return;let s=i[r+"_"+o];return s?(a[n]=s,a):void 0},e.createSegmentObject=function(t,r){let o={};return r("body>[id*=layout]").each((function(){let a=r(this).attr("id"),s=e.extractPageName(a);for(n.log("seg processing page "+s),e.addSegProperty(t,s,"email",o),e.addSegProperty(t,s,"phone",o),e.addSegProperty(t,s,"name",o),e.addSegProperty(t,s,"first_name",o),e.addSegProperty(t,s,"last_name",o),e.addSegProperty(t,s,"full_name",o),e.addSegProperty(t,s,"opt_in",o),i=1;i<=50;i++)e.addSegProperty(t,s,"custom_"+i,o)})),o},e.segTrack=function(r,o,a){if(!r||!o||!a)throw new Error("Missing parameter for api.segTrack(boxapi, pageName, box$)");let i=r.getPageMetadata(o,f);if(i){let s=e.createSegmentObject(r,a),l=JSON.stringify(s);if(e.setDataLayerValue(_,l,r.getId()),!t.analytics||!t.analytics.track)throw new Error("Segment JS tag not found. Cannot track event "+i+" from browser client");n.log("seg_track for page "+o+": "+i+l),t.analytics.track(i,s)}},e.segTraits=function(r,o,a){if(!r||!o||!a)throw new Error("Missing parameter for api.segTraits(boxapi, pageName, box$)");if(r.getPageMetadata(o,m)){let i=e.createSegmentObject(r,a),s=JSON.stringify(i);if(e.setDataLayerValue(_,s,r.getId()),!t.analytics||!t.analytics.identify)throw new Error("Segment JS tag not found. Cannot set traits from browser client."+eventName);n.log("seg_traits for page "+o+": "+JSON.stringify(i)),t.analytics.identify(i)}},"www.codecademy.com"==t.location.host||"try.codecademy.com"==t.location.host&&void 0===t.digioh_traits){t.digioh_traits={};let A=function(e){t.sessionStorage&&t.sessionStorage.setItem("_dgoh",btoa(JSON.stringify(e)))},E=function(e){for(var r in e)e.hasOwnProperty(r)&&("active_subscription"==r?t.digioh_traits.paid_user=e[r]:"anonymous"==r?t.digioh_traits.anonymous_user=e[r]:"country_code"==r&&(t.digioh_traits.geo_country=e[r]),"student"==r&&1==e[r]?t.digioh_traits.user_type="student":"trial"==r&&1==e[r]?t.digioh_traits.user_type="trial":"cfb"==r&&1==e[r]?t.digioh_traits.user_type="business":"pro"==r&&1==e[r]?t.digioh_traits.user_type="pro":"anonymous"==r&&1==e[r]?t.digioh_traits.user_type="anonymous":"free"==r&&1==e[r]&&(t.digioh_traits.user_type="free"));delete t.digioh_traits.$opt_experiment_bucket_map,delete t.digioh_traits.$opt_user_agent,delete t.digioh_traits.ip_address,delete t.digioh_traits.e2e_test_user,delete t.digioh_traits.admin,delete t.digioh_traits.optimizely_test_user,delete t.digioh_traits.chapter_leader,delete t.digioh_traits.forum_moderator,delete t.digioh_traits.author,delete t.digioh_traits.env,delete t.digioh_traits.cfb,delete t.digioh_traits.active_subscription,delete t.digioh_traits.student,delete t.digioh_traits.trial,delete t.digioh_traits.free,delete t.digioh_traits.enterprise,delete t.digioh_traits.pii_safe,delete t.digioh_traits.anonymous,delete t.digioh_traits.id,delete t.digioh_traits.country_code,A(t.digioh_traits)},T=function(){return new Promise((function(e,t){fetch("https://www.codecademy.com/users/session?skip_initial_referrer=true").then((function(e){return e.json()})).then((function(t){var r=t.attributes;e(r)})).catch((function(e){}))}))};if("undefined"!=typeof __NEXT_DATA__&&void 0!==__NEXT_DATA__.props&&void 0!==__NEXT_DATA__.props.pageProps&&void 0!==__NEXT_DATA__.props.pageProps.__OPTIMIZELY__&&void 0!==__NEXT_DATA__.props.pageProps.__OPTIMIZELY__.optimizelyUser&&void 0!==__NEXT_DATA__.props.pageProps.__OPTIMIZELY__.optimizelyUser.attributes){var c=__NEXT_DATA__.props.pageProps.__OPTIMIZELY__.optimizelyUser.attributes;t.digioh_traits=c,E(c)}else null!==t.sessionStorage.getItem("_dgoh")?(c=JSON.parse(atob(t.sessionStorage.getItem("_dgoh"))),t.digioh_traits=c,E(c)):T().then((function(e){t.digioh_traits=e,E(e)}));return void(t.seg_traits=t.digioh_traits)}if(!d())return;if(d()&&!t.analytics&&(e.segmentCheckCount=e.segmentCheckCount||1,e.segmentCheckCount++,e.segmentCheckCount<5))return"async_retry";if(t.analytics)if(e.segmentUserId=t.parent.analytics.user().id(),e.segmentUserId){if(!e.traits){if(!function(r){if(t.sessionStorage){var a=t.sessionStorage.getItem(r);if(a)try{return e.traits=JSON.parse(atob(a)),l(e.traits),!0}catch(o){return n.log("Bad trait JSON: "+o),t.sessionStorage.removeItem(r),e.traits={},!0}}var i="https://jsapi.lightboxcdn.com/seghf9svjz85ruu7m29/v1/segment/GetUserByExternalId?platform=d&format=jsonp";i+="&user_guid="+e.getAccountGuid(),i+="&integration_id="+g(),i+="&space_id="+u(),i+="&external_id=user_id:"+r,i+="&admin_debug=yes";return n.log("Segment API call: "+i),o.ajax({url:i,timeout:1e3,dataType:"text",success:function(o,a,i){try{n.log("API data: "+o),t.raw=o,o=JSON.parse(o),(o=JSON.parse(o.body)).traits?(o=o.traits,n.log("Segment API traits obj: "+JSON.stringify(o)),t.sessionStorage&&t.sessionStorage.setItem(r,btoa(JSON.stringify(o))),e.traits=o,l(o)):(e.traits={},n.log("Unusable response from Segment API: "+JSON.stringify(o)))}catch(t){n.log("Segment API exception processing response: "+t),e.traits={}}finally{t.DIGIOH_API.LIGHTBOX.customJsOnDocumentReadyCallback()}},error:function(r,o,a){n.log("Segment API error: "+o+" : "+a),e.traits={},t.DIGIOH_API.LIGHTBOX.customJsOnDocumentReadyCallback()}}),!1}(e.segmentUserId))return n.log("Waiting for Segment API"),"async_callback";n.log("Segment traits from cache")}}else n.log("No Segment userId");function g(){return e.getAccountMetadata(I)}function u(){return e.getAccountMetadata(S)}function d(){if(!g()||!u())return!1;let t=e.getHostname().toLowerCase(),r=e.getAccountMetadata(h)||t;return r=r.split(",").map((e=>e.toLowerCase().trim())),r.includes(t)||n.log("Segment persona targeting disabled by account metadata "+h+"="+e.getAccountMetadata(h)),!0}n.log("Parent JS Complete"),e.sha256=function e(t){function r(e,t){return e>>>t|e<<32-t}for(var o,a,n=Math.pow,i=n(2,32),s="length",l="",c=[],g=8*t[s],u=e.h=e.h||[],d=e.k=e.k||[],p=d[s],f={},m=2;p<64;m++)if(!f[m]){for(o=0;o<313;o+=m)f[o]=m;u[p]=n(m,.5)*i|0,d[p++]=n(m,1/3)*i|0}for(t+="";t[s]%64-56;)t+="\0";for(o=0;o<t[s];o++){if((a=t.charCodeAt(o))>>8)return;c[o>>2]|=a<<(3-o)%4*8}for(c[c[s]]=g/i|0,c[c[s]]=g,a=0;a<c[s];){var _=c.slice(a,a+=16),I=u;for(u=u.slice(0,8),o=0;o<64;o++){var S=_[o-15],b=_[o-2],h=u[0],y=u[4],O=u[7]+(r(y,6)^r(y,11)^r(y,25))+(y&u[5]^~y&u[6])+d[o]+(_[o]=o<16?_[o]:_[o-16]+(r(S,7)^r(S,18)^S>>>3)+_[o-7]+(r(b,17)^r(b,19)^b>>>10)|0);(u=[O+((r(h,2)^r(h,13)^r(h,22))+(h&u[1]^h&u[2]^u[1]&u[2]))|0].concat(u))[4]=u[4]+O|0}for(o=0;o<8;o++)u[o]=u[o]+I[o]|0}for(o=0;o<8;o++)for(a=3;a+1;a--){var C=u[o]>>8*a&255;l+=(C<16?0:"")+C.toString(16)}return l}}catch(P){DIGIOH_CUSTOM_JS.logError(P,"runCustomJsOnDocumentReady"),P.message="DIGIOH: Custom JS Parent -- "+P.message,t.console.error(P)}return!0},runCustomJsBeforeLightboxDisplay:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsBeforeLightboxDisplay"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}return!0},runCustomJsOnLightboxDisplay:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxDisplay"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnChangePages:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnChangePages"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxSubmit:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxSubmit"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxRedirect:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxRedirect"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxDownload:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxDownload"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxClose:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxClose"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},log:function(e){DLOG.log(e,"CUSTOM_JS_PARENT")},logError:function(e,t){try{DLOG.log(e.message,"CUSTOM_JS_PARENT."+t+"()"),DLOG.logErrorFromCustomJsParent(e,"CUSTOM_JS_PARENT."+t)}catch(e){e.message="DIGIOH: Custom JS Parent -- "+e.message,window.console.error(e)}}},window.DIGIOH_CUSTOM_JS_SUPER={runCustomJsOnDocumentReady:function(e,t,r,o,a){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnDocumentReady"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}return!0},runCustomJsBeforeLightboxDisplay:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsBeforeLightboxDisplay"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}return!0},runCustomJsOnLightboxDisplay:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxDisplay"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnChangePages:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnChangePages"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxSubmit:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxSubmit"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxRedirect:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxRedirect"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxDownload:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxDownload"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxClose:function(e,t,r,o,a,n,i){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxClose"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},log:function(e){try{DLOG.log(e,"CUSTOM_JS_GLOBAL")}catch(e){e.message="DIGIOH: Custom JS Global -- "+e.message,window.console.error(e)}},logError:function(e,t){try{DLOG.log(e.message,"CUSTOM_JS_GLOBAL."+t+"()"),DLOG.logErrorFromCustomJsParent(e,"CUSTOM_JS_GLOBAL."+t)}catch(e){e.message="DIGIOH: Custom JS Global -- "+e.message,window.console.error(e)}}};let t=DIGIOH_LOADER?.loads?DIGIOH_LOADER.loads.custom:null;t&&t.resolveCallback()}();